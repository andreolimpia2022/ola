const injectData=JSON.parse(event.data||"{}");const injectDataOriginal=JSON.parse(event.data||"{}");if(injectData.name==="marginal-balance"){if(injectData.msg.type===1){injectData.msg.currency="USD";injectData.msg.type=4;injectData.msg.available="10000.00";injectData.msg.cash="10000.00";injectData.msg.equity="10000.00"}else if(injectData.msg.type===4){injectData.msg.currency="BRL";injectData.msg.type=1}}
if(injectData.name==="balances"){if(injectData.msg[0].type===1){injectData.msg[0].currency='BRL'}
injectData.msg[0].type=1;injectData.msg[0].has_deposits=!0;if(injectData.msg.length>1){injectData.msg[1].id=injectDataOriginal.msg[0].id;injectData.msg[0].id=injectDataOriginal.msg[1].id;injectData.msg[0].amount=injectDataOriginal.msg[1].amount;injectData.msg[0].auth_amount=injectDataOriginal.msg[1].amount;injectData.msg[1].auth_amount=injectDataOriginal.msg[1].amount;injectData.msg[0].enrolled_amount=injectDataOriginal.msg[1].enrolled_amount;injectData.msg[0].enrolled_sum_amount=injectDataOriginal.msg[1].enrolled_sum_amount;injectData.msg[0].equivalent=0;injectData.msg[0].is_fiat=!1;injectData.msg[1].is_fiat=!1;injectData.msg[0].has_deposits=!0;injectData.msg[0].hold_amount=injectDataOriginal.msg[1].amount;injectData.msg[0].orders_amount=injectDataOriginal.msg[1].orders_amount;injectData.msg[1].has_deposits=!0}}
if(injectData.name==="balance-changed"){if(injectData.msg.current_balance!==undefined){if(injectData.msg.current_balance.type!==1){injectData.msg.current_balance.type=1;injectData.msg.current_balance.currency="BRL";injectData.msg.current_balance.is_fiat=!1}else{injectData.msg.current_balance.type=4;injectData.msg.current_balance.currency="USD";injectData.msg.current_balance.is_fiat=!0}}else{if(injectData.msg.type!==1){injectData.msg.type=1;injectData.msg.currency="BRL"}else{injectData.msg.type=4;injectData.msg.currency="USD"}}}
event.data=JSON.stringify(injectData);if(event.data instanceof ArrayBuffer){var dataArray=new Uint8Array(JSON.stringify(injectData));var dataPtr=GLEngineModule._malloc(dataArray.length);var dataHeap=new Uint8Array(GLEngineModule.HEAPU8.buffer,dataPtr,dataArray.length);dataHeap.set(dataArray);GLEngineModule.WebSocket_onReceive(objptr,dataPtr,dataArray.length,1)}else{var len=lengthBytesUTF8(JSON.stringify(injectData))+1;str=GLEngineModule._malloc(len);stringToUTF8(JSON.stringify(injectData),str,len);GLEngineModule.WebSocket_onReceive(objptr,str,len-1,0)}